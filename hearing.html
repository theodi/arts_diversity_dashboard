<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="css/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="js/d3.min.js" charset="utf-8"></script>
    <script src="js/nv.d3.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
            height: 650px;
            width: 650px;
        }
        html, body {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
	    text-align: center;
        }
 	#test1 {
		margin-left: auto;
		margin-right: auto;
	}
	#main {
		width: 80%;
		margin-left: auto;
		margin-right: auto;
	}
    </style>
</head>
<body class='with-3d-shadow with-transitions'>
<section id="main">
<h1>Over the past year, have you had difficulty or been unable to do any of
the activities listed below for reasons related to your hearing loss or deafness? 5960 respondants</h1>
<h2>Source: <a href="http://www.actiononhearingloss.org.uk/supporting-you/policy-research-and-influencing/research/annual-survey-of-members/annual-survey-2011.aspx" target="_blank">Action hearing loss annual report 2011</a> (the latest report as of May 2015)</h2>

<svg id="test1" class="mypiechart"></svg>
</section>
<script>

    var testdata = [
        {key: "Cinema, theatre, concerts", y: 50},
        {key: "Pub, restaurant", y: 36},
        {key: "Adult education", y: 27},
        {key: "Sport/Exercise", y: 13},
        {key: "Shopping", y: 11},
        {key: "Sporting event", y: 9},
        {key: "Library, gallery, museum", y: 7},
        {key: "other activity", y: 33}
    ];
    
    var height = 650;
    var width = 650;

    nv.addGraph(function() {
        var chart = nv.models.pieChart()
            .x(function(d) { return d.key })
            .y(function(d) { return d.y })
            .width(width)
            .height(height);

        d3.select("#test1")
            .datum(testdata)
            .transition().duration(1200)
            .attr('width', width)
            .attr('height', height)
            .call(chart);

        return chart;
    });

</script>
</body>
</html>
